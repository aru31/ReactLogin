<!DOCTYPE HTML>
<html>
<head>
    <title>Stream</title>
</head>
<body>
    <label for="url">Url</label>
    <input id="url" type="search" /><br />
</body>
<script>

   var form_url = document.getElementById('url');
   var format =  {
            'url': "",
        }
   var streamSocket = new WebSocket(
        'ws://' + 'localhost:8000' + '/ws/stream/'
    );

    streamSocket.onmessage = function(e){
        var data = JSON.parse(e.data);
        url = data['url'] ;
        (url === "") ? void(0) : (form_url.value = url);
    };
    streamSocket.onclose  = function(e){
        console.error('Chat Socket Closed Unexpectedly');
    }
    
    form_url.onkeyup = function(e){
        if (e.keyCode === 13 ){
            format['url'] = form_url.value;
            streamSocket.send(JSON.stringify(format));
            format['url'] = "";}
    };
</script>
</html>

